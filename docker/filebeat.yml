###################### Filebeat-ING Configuration Example #########################

# This file is a custom ING skeleton configuration file.

#=========================== Filebeat prospectors =============================

filebeat.inputs:
  - type: log 
    enabled: true     # Change to true to enable this prospector configuration.
    paths:            # Paths that should be crawled and fetched. Glob based paths.
      - ./log.txt
    exclude_lines: ['healthcheck']
  #================================ General =====================================
tags: ["testingfilebeat"]
  #================================ Processors =====================================
  
  # Configure processors to enhance or manipulate events generated by the beat.
  
  # input example for the grok: 2019-02-08T11:41:24.788+0100    INFO    [testmonitoring]        log/log.go:144  This is an info message
  # sample : [18/May/2020:09:02:10 +0200] - 172.32.2.1 - [WbSecurityProxy @ TST] - TRUE - "GET /report-templates HTTP/1.1" 200 349 "https://wb-employee-mfa-tst.ing.net/ssm/sso/saml/login" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36" 40.530 "10.76.35.184"

processors:
  - grok:
      patterns: \[%{HTTPDATE:timestamp}\] %{NOTSPACE:f1} %{IPORHOST:source} %{GREEDYDATA:message}
 # \[%{HTTPDATE:timestamp}\] %{NOTSPACE:f1} %{IPORHOST:source} %{NOTSPACE:f2} \[%{GREEDYDATA:f3}\] %{NOTSPACE:f4} %{NOTSPACE:f5} %{NOTSPACE:f6} %{GREEDYDATA:message}
  - javascript:
      file: "filebeat.js"
  #================================ Outputs =====================================
  
  # Configure what output to use when sending the data collected by the beat.
output.console:
    pretty: true

output.kafka:
  enabled: false 
  topic: 'log_topic'
  codec.avro:
    file: "filebeat.avsc"
  partition.round_robin:
  reachable_only: false
  required_acks: 1
  #version : 0.11
  compression: "none"
  compression_level: 0
  keep_alive: 3
  channel_buffer_size: 1
  max_message_bytes: 10000
  max_bytes: 10000
  keepfiles: 7
  hosts: ["localhost:9092"]

    
  #================================ Logging =====================================
  # Sets log level. The default log level is info.
  # Available log levels are: error, warning, info, debug
logging.level: info # was debug 
logging.to_files: true
logging.files:
  path: .
  name: filebeat.log
  keepfiles: 7
  permissions: 0644
  # At debug level, you can selectively enable logging only for some components.
  # To enable all selectors use ["*"]. Examples of other selectors are "beat",
  # "publish", "service".
  #logging.selectors: ["*"]
  
